<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OBLIRIM PWN Master</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&family=IBM+Plex+Mono:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    
    <style>
        /* Root color variables */
        :root {
            --primary-bg: #0a0a0a;
            --secondary-bg: #1a1a1a;
            --tertiary-bg: #2a2a2a;
            --border-color: #555555;
            --text-primary: #ff9933;
            --text-secondary: #cccccc;
            --text-accent: #ffb366;
            --status-up: #33ff33;
            --status-down: #ff3333;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: var(--primary-bg);
            color: var(--text-primary);
            font-family: 'IBM Plex Mono', 'Courier Prime', monospace;
            font-size: 14px;
            line-height: 1.6;
            letter-spacing: 0.05em;
            overflow-x: hidden;
        }

        /* Pixelated/Terminal feel */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                repeating-linear-gradient(
                    0deg,
                    rgba(0, 0, 0, 0.03),
                    rgba(0, 0, 0, 0.03) 1px,
                    transparent 1px,
                    transparent 2px
                );
            pointer-events: none;
            z-index: 1;
        }

        .container {
            position: relative;
            z-index: 2;
        }

        /* Header styling */
        h1 {
            color: var(--text-primary);
            text-shadow: 0 0 10px rgba(255, 153, 51, 0.3);
            font-weight: 700;
            letter-spacing: 0.1em;
            margin-bottom: 1.5rem;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 1rem;
            text-transform: uppercase;
        }

        h3 {
            color: var(--text-accent);
            text-shadow: 0 0 8px rgba(255, 153, 51, 0.2);
            font-weight: 600;
            letter-spacing: 0.08em;
            margin-bottom: 1.2rem;
            text-transform: uppercase;
        }

        /* Nav tabs styling */
        .nav-tabs {
            border-bottom: 2px solid var(--border-color);
            gap: 0.5rem;
            margin-bottom: 2rem;
        }

        .nav-link {
            background-color: var(--secondary-bg);
            color: var(--text-secondary);
            border: 2px solid var(--border-color);
            border-radius: 0;
            padding: 0.75rem 1.25rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-size: 12px;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .nav-link:hover {
            background-color: var(--tertiary-bg);
            color: var(--text-primary);
            border-color: var(--text-primary);
            box-shadow: 0 0 8px rgba(255, 153, 51, 0.2);
        }

        .nav-link.active {
            background-color: var(--tertiary-bg);
            color: var(--text-primary);
            border-color: var(--text-primary);
            box-shadow: inset 0 0 8px rgba(255, 153, 51, 0.15);
        }

        /* Tab content styling */
        .tab-content {
            background-color: var(--secondary-bg);
            border: 2px solid var(--border-color);
            border-radius: 0;
            padding: 2rem;
        }

        .tab-pane {
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* System info box */
        #system-info {
            background-color: var(--primary-bg);
            border: 2px solid var(--border-color);
            border-radius: 0;
            padding: 1.5rem;
            line-height: 2;
        }

        #system-info p {
            margin: 0;
            color: var(--text-secondary);
        }

        #system-info span {
            color: var(--text-primary);
            font-weight: 600;
            text-shadow: 0 0 5px rgba(255, 153, 51, 0.2);
        }

        /* Status indicators */
        .status-up {
            color: var(--status-up);
            text-shadow: 0 0 5px rgba(51, 255, 51, 0.5);
        }

        .status-down {
            color: var(--status-down);
            text-shadow: 0 0 5px rgba(255, 51, 51, 0.5);
        }

        /* Buttons */
        .btn {
            font-family: 'IBM Plex Mono', monospace;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 600;
            font-size: 12px;
            border: 2px solid;
            border-radius: 0;
            padding: 0.6rem 1.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-primary {
            background-color: var(--tertiary-bg);
            color: var(--text-primary);
            border-color: var(--text-primary);
        }

        .btn-primary:hover {
            background-color: var(--text-primary);
            color: var(--primary-bg);
            box-shadow: 0 0 10px rgba(255, 153, 51, 0.4);
        }

        /* ASCII art styling */
        #ascii-face {
            background-color: var(--primary-bg);
            border: 2px solid var(--border-color);
            border-radius: 0;
            padding: 1.5rem;
            color: var(--text-primary);
            font-family: 'Courier Prime', monospace;
            font-size: 11px;
            line-height: 1.4;
            text-shadow: 0 0 5px rgba(255, 153, 51, 0.15);
            overflow: auto;
        }

        /* Output displays */
        #script-output,
        #log-display {
            background-color: var(--primary-bg);
            border: 2px solid var(--border-color);
            border-radius: 0;
            padding: 1.5rem;
            color: var(--text-secondary);
            font-family: 'Courier Prime', monospace;
            font-size: 12px;
            line-height: 1.6;
            max-height: 500px;
            overflow-y: auto;
        }

        #script-output pre {
            margin: 0;
            color: var(--text-primary);
        }

        #script-output pre[style*="color:red"] {
            color: var(--status-down) !important;
        }

        #log-display {
            color: var(--text-accent);
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--secondary-bg);
            border: 1px solid var(--border-color);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 0;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-primary);
        }

        /* Row spacing */
        .row {
            gap: 2rem;
            margin-top: 1rem;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            h1 {
                font-size: 1.5rem;
            }

            .nav-link {
                padding: 0.5rem 0.75rem;
                font-size: 10px;
            }

            #ascii-face {
                font-size: 9px;
            }
        }

        /* CRT/Monitor effect subtle overlay */
        .tab-pane::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at center, transparent 0%, rgba(0,0,0,0.05) 100%);
            pointer-events: none;
            border-radius: 0;
        }

        .tab-pane {
            position: relative;
        }
    </style>
</head>
<body>
    <div class="container mt-4">
        <h1>Raspberry Pi Dashboard</h1>
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="dashboard-tab" data-bs-toggle="tab" data-bs-target="#dashboard" type="button" role="tab" aria-controls="dashboard" aria-selected="true">Dashboard</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="tab2-tab" data-bs-toggle="tab" data-bs-target="#tab2" type="button" role="tab" aria-controls="tab2" aria-selected="false">Tab 2</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="tab3-tab" data-bs-toggle="tab" data-bs-target="#tab3" type="button" role="tab" aria-controls="tab3" aria-selected="false">Tab 3</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="tab4-tab" data-bs-toggle="tab" data-bs-target="#tab4" type="button" role="tab" aria-controls="tab4" aria-selected="false">Tab 4</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="tab5-tab" data-bs-toggle="tab" data-bs-target="#tab5" type="button" role="tab" aria-controls="tab5" aria-selected="false">Tab 5</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="tab6-tab" data-bs-toggle="tab" data-bs-target="#tab6" type="button" role="tab" aria-controls="tab6" aria-selected="false">Tab 6</button>
            </li>
        </ul>
        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active" id="dashboard" role="tabpanel" aria-labelledby="dashboard-tab">
                <div class="row mt-4">
                    <div class="col-md-6">
                        <h3>Tamagotchi Face</h3>
                        <pre id="ascii-face">
  .-^^---....,,--       
 /          ,     ,|      
|        ,     ,   |      
|     ,  ,   ,     |      
 \    |   |   |    /      
  \   |   |   |   /       
   \  |   |   |  /        
    \ |   |   | /         
     \|   |   |/          
      \   |   /           
       \  |  /            
        \ | /             
         \|/              
          '               
        </pre>
                    </div>
                    <div class="col-md-6">
                        <h3>System Specs</h3>
                        <div id="system-info">
                            <p>Pi Model: <span id="pi-model">Loading...</span></p>
                            <p>IP Address: <span id="ip">Loading...</span></p>
                            <p>WLAN0 State: <span id="wlan0" class="status-indicator">Loading...</span></p>
                            <p>WLAN1 State: <span id="wlan1" class="status-indicator">Loading...</span></p>
                            <p>ETH0 State: <span id="eth0" class="status-indicator">Loading...</span></p>
                            <p>Bluetooth State: <span id="bluetooth" class="status-indicator">Loading...</span></p>
                            <p>Temperature: <span id="temperature">Loading...</span></p>
                            <p>CPU Usage: <span id="cpu">Loading...</span></p>
                            <p>Memory Usage: <span id="memory-usage">Loading...</span></p>
                            <p>Memory: <span id="memory-percent">Loading...</span></p>
                            <p>Disk Usage: <span id="disk-usage">Loading...</span></p>
                            <p>Disk: <span id="disk-percent">Loading...</span></p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tab-pane fade" id="tab2" role="tabpanel" aria-labelledby="tab2-tab">
                <h3>Script Runner</h3>
                <button id="run-script-btn" class="btn btn-primary">Run Example Script</button>
                <div id="script-output" class="mt-3"></div>
            </div>
            <div class="tab-pane fade" id="tab3" role="tabpanel" aria-labelledby="tab3-tab">
                <h3>Log Viewer</h3>
                <button id="refresh-logs-btn" class="btn btn-primary">Refresh Logs</button>
                <pre id="log-display" class="mt-3" style="max-height: 400px; overflow-y: scroll;"></pre>
            </div>
            <div class="tab-pane fade" id="tab4" role="tabpanel" aria-labelledby="tab4-tab">
                <h3>Tab 4 Content</h3>
                <p>This is placeholder content for Tab 4.</p>
            </div>
            <div class="tab-pane fade" id="tab5" role="tabpanel" aria-labelledby="tab5-tab">
                <h3>Tab 5 Content</h3>
                <p>This is placeholder content for Tab 5.</p>
            </div>
            <div class="tab-pane fade" id="tab6" role="tabpanel" aria-labelledby="tab6-tab">
                <h3>Tab 6 Content</h3>
                <p>This is placeholder content for Tab 6.</p>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
const socket = io();

function updateStatusIndicators(data) {
    const statusElements = {
        'wlan0': data.wlan0,
        'wlan1': data.wlan1,
        'eth0': data.eth0,
        'bluetooth': data.bluetooth
    };

    for (const [id, status] of Object.entries(statusElements)) {
        const element = document.getElementById(id);
        if (element) {
            element.textContent = status || 'N/A';
            element.className = ''; // reset
            if (status === 'Up') {
                element.classList.add('status-up');
            } else if (status === 'Down') {
                element.classList.add('status-down');
            }
        }
    }
}

// Listen for the correct event name from Python
socket.on('update_data', function(data) {
    document.getElementById('pi-model').textContent = data.pi_model || 'N/A';
    document.getElementById('ip').textContent = data.ip;
    document.getElementById('temperature').textContent = data.temperature;
    document.getElementById('cpu').textContent = data.cpu;
    document.getElementById('memory-usage').textContent = data.memory_usage || 'N/A';
    document.getElementById('memory-percent').textContent = data.memory_percent || 'N/A';
    document.getElementById('disk-usage').textContent = data.disk_usage || 'N/A';
    document.getElementById('disk-percent').textContent = data.disk_percent || 'N/A';
    updateStatusIndicators(data);
});

socket.on('connect', () => {
    console.log('Connected to server');
});

// Optional: handle other events
socket.on('script_output', (data) => {
    const output = data.output ? `<pre>${data.output}</pre>` : '';
    const error = data.error ? `<pre style="color:var(--status-down)">${data.error}</pre>` : '';
    document.getElementById('script-output').innerHTML = output + error;
});

socket.on('log_data', (data) => {
    document.getElementById('log-display').textContent = data;
});

// Button handlers
document.getElementById('run-script-btn')?.addEventListener('click', () => {
    socket.emit('run_script', { script: 'example' });
});

document.getElementById('refresh-logs-btn')?.addEventListener('click', () => {
    socket.emit('request_logs');
});
</script>
</body>
</html>
